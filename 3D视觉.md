SLAM
------

传感器 ——> VO ——> 后端优化 ——> mapping
   
  |——> 回环检测——> |
  
前端VO：
初始化：
- 已知匹配点，相机内参，获取三维点坐标；

建图：
- 三维点的更新：BA更新
- 三维点增加：特征点匹配-》计算新的三维点


- 匹配；
   - 方法：很多种，暴力匹配、BOW
   - BOW：
    - 词袋模型https://blog.csdn.net/KYJL888/article/details/102588059
    - 主要作用：回环检测
    -  
    


后端优化：
- 局部（不回环检测）：
  - EKF
  - BA：
    - 待优化变量：每一帧相机位姿，三维点坐标
    - 优化方法：dogleg、LM、高斯牛顿法
      - 根据每张图片关键点和三维点之间的对应关系建立重投影误差方程，联立方程组；
      - 按照初始值泰勒展开（线性化）
      - 解优化方程：最简单的是用高斯牛顿法，但是在缺约束的时候会存在错解，所以用其他两种方法
      - 迭代求解，设定阈值，解出来的位姿和三维坐标再作为初值计算重投影误差，如果更新量小于阈值（理想状况），优化结束，一般是设定优化次数或者最长优化时间来控制结束。
- 回环检测之后：
  - 位姿图优化： vins-mono
  - 位姿图优化 + BA： ORB-SLAM
  - 方法：跟BA的优化其实是一个方法，只是建立方程依据不同
    - 待优化量：每一帧绝对位姿，每两帧相对位姿；
    - 根据每一帧的绝对位姿和每两帧之间的相对位姿旋转偏移建立方程； 
    - 最后一帧跟开始的一帧被回环检测到，是回环边，根据回环边建立方程；
    - 按照初值泰勒展开（线性化）
    - 迭代求解，，，，，，

